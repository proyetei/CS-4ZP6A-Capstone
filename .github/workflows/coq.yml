name: Coq Docker Practice

on: [push]

jobs:
  coq_job:
    runs-on: ubuntu-latest
    steps:
      - name: Check out the repo
        uses: actions/checkout@v3
      - name: Build docker image
        run: |
          docker build -t "coq:latest" --file Dockerfile_coq .
      - name: run docker image and compile file
        run: |
          docker run -d --name coq-container -v "./coq-code:/home/coq/code" coq:latest
          docker exec coq-container /bin/bash -c "coqc ./code/Basics.v"
          docker stop coq-container
          docker rm coq-container
     